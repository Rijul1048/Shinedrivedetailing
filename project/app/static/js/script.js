document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("menu-btn"),t=document.getElementById("mobile-menu");e.addEventListener("click",(()=>{t.classList.toggle("hidden")}));const n=document.getElementById("navbar");window.addEventListener("scroll",(()=>{window.scrollY>50?(n.classList.add("bg-white","shadow-md"),n.classList.remove("nav-glass")):(n.classList.remove("bg-white","shadow-md"),n.classList.add("nav-glass"))})),document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.getElementById("new-particles-container");for(let t=0;t<15;t++){const t=document.createElement("div");t.classList.add("new-particle");const n=30*Math.random()+10,i=100*Math.random(),l=100*Math.random();t.style.width=`${n}px`,t.style.height=`${n}px`,t.style.left=`${i}%`,t.style.top=`${l}%`,t.style.opacity=.3*Math.random()+.1,t.style.animationDuration=10*Math.random()+10+"s",t.style.animationDelay=8*Math.random()+"s",e.appendChild(t)}}()}));const i=document.querySelectorAll(".tab-btn"),l=document.querySelectorAll(".package-card");if(i.length>0&&l.length>0){function o(e){i.forEach((e=>{e.classList.remove("active","bg-[#756AB6]","text-white"),e.classList.add("bg-white","text-[#756AB6]","border")})),this.classList.add("active","bg-[#756AB6]","text-white"),this.classList.remove("bg-white","text-[#756AB6]","border");const t=this.dataset.tab;l.forEach((e=>{e.classList.add("hidden")})),"full"===t?document.querySelectorAll(".full-detail").forEach((e=>{e.classList.remove("hidden")})):"exterior"===t?document.querySelectorAll(".exterior-detail").forEach((e=>{e.classList.remove("hidden")})):"interior"===t&&document.querySelectorAll(".interior-detail").forEach((e=>{e.classList.remove("hidden")}))}i.forEach((e=>{e.addEventListener("click",o)})),i[0].click()}const r=document.getElementById("back-to-top");r&&(window.addEventListener("scroll",(function(){window.pageYOffset>300?(r.classList.remove("opacity-0","invisible"),r.classList.add("opacity-100","visible")):(r.classList.remove("opacity-100","visible"),r.classList.add("opacity-0","invisible"))})),r.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}))),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth"})}))}))}));let reviewsInitialized=!1;function initMap(){if(reviewsInitialized)return;reviewsInitialized=!0;const e=document.getElementById("review-summary"),t=document.getElementById("reviews-track");if(!e||!t)return;e.innerHTML="",t.innerHTML="";document.querySelectorAll(".reviews-link").forEach((e=>e.remove()));new google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:"ChIJH4rkzU6ph0cR5YBNx_aKv2A",fields:["name","rating","reviews","url","user_ratings_total"]},((n,i)=>{if(i===google.maps.places.PlacesServiceStatus.OK&&n){const i=n.user_ratings_total||0,l=n.rating||"N/A";if(e.innerHTML=`\n        <h3 class="text-2xl font-bold mb-4 text-[#756AB6]">Rated ${l}/5 ⭐</h3>\n        <p class="text-lg text-[#756AB6]">Trusted by <strong class="text-[#7F55B1] text-2xl">${i}+</strong> happy customers</p>\n      `,n.reviews&&n.reviews.length>0){if(t.innerHTML=n.reviews.map((e=>`\n          <div class="bg-gradient-to-r from-[#756AB6] to-[#5f52a9] p-8 rounded-xl min-w-[300px] md:min-w-[400px] max-w-[400px] border border-[#7F55B1] shadow-sm h-auto flex flex-col backdrop-blur-sm hover:border-purple-400 transition-all duration-300">\n            <div class="font-bold text-[#E8F9FF] text-lg mb-2">${e.author_name}</div>\n            <div class="text-[#7F55B1] text-lg mb-4">${"⭐".repeat(e.rating)} • ${e.rating}/5</div>\n            <p class="text-[#E8F9FF] leading-relaxed text-base flex-grow">"${e.text}"</p>\n          </div>\n        `)).join(""),n.url){const e=document.createElement("div");e.className="reviews-link text-center mt-8",e.innerHTML=`\n            <a href="${n.url}" target="_blank" rel="noopener noreferrer" \n              class="text-[#7F55B1] no-underline border-2 border-[#7F55B1] py-3 px-6 rounded-full transition-all duration-300 font-bold inline-block hover:bg-[#7F55B1] hover:text-white hover:shadow-lg hover:shadow-[#7F55B1]/30">\n              Read All ${i} Reviews\n            </a>\n          `,t.after(e)}}else t.innerHTML='<div class="text-[#E8F9FF] text-center py-5">Our customers love us! Check back soon for more reviews.</div>'}else e.innerHTML='\n        <div class="text-[#E8F4E2]">\n          <h3 class="text-2xl font-bold mb-2 text-[#7F55B1]">Our Customers Love Us!</h3>\n          <p>While we load our latest reviews, here\'s what people say:</p>\n        </div>\n      ',t.innerHTML='\n        <div class="bg-[#756AB6] p-6 md:p-8 rounded-xl min-w-[300px] md:min-w-[400px] max-w-[400px] border border-[#7F55B1] shadow-sm h-auto flex flex-col backdrop-blur-sm">\n          <div class="font-bold text-[#7F55B1] text-lg mb-2">Sarah M.</div>\n          <div class="text-[#7F55B1] text-lg mb-4">⭐⭐⭐⭐⭐ • 5/5</div>\n          <p class="text-[#E8F9FF] leading-relaxed text-base flex-grow">"The best detailing service I\'ve ever used! My car looks brand new again."</p>\n        </div>\n      '}))}function loadReviews(){if("undefined"==typeof google){const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6iCfwC2HzjH_RUeB3h8l94lgyZM0_wEg&libraries=places&callback=initMap",e.async=!0,e.defer=!0,e.id="google-maps-script",document.head.appendChild(e)}else reviewsInitialized||initMap()}function loadGoogleMaps(){if("undefined"==typeof google){const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap",e.async=!0,e.defer=!0,document.head.appendChild(e)}else initMap()}function getPackageInfo(e,t,n){const i={sedan:{full:{bronze_full:{display:"Bronze Full Detail ($136 CAD)",price:"136",duration:"1-2 hours"},gold_full:{display:"Gold Full Detail ($195 CAD)",price:"195",duration:"2-3 hours"},platinum_full:{display:"Platinum Full Detail ($217 CAD)",price:"217",duration:"3-4 hours"}},interior:{bronze_interior:{display:"Bronze Interior Detail ($110 CAD)",price:"110",duration:"1-1.5 hours"},gold_interior:{display:"Gold Interior Detail ($165 CAD)",price:"165",duration:"1.5-2.5 hours"},platinum_interior:{display:"Platinum Interior Detail ($186 CAD)",price:"186",duration:"2-3 hours"}},exterior:{gold_exterior:{display:"Gold Exterior Detail ($163 CAD)",price:"163",duration:"1-1.5 hours"},platinum_exterior:{display:"Premium Exterior Detail ($200 CAD)",price:"200",duration:"1.5-2 hours"}}},suv5:{full:{bronze_full:{display:"Bronze Full Detail ($171 CAD)",price:"171",duration:"1.5-2.5 hours"},gold_full:{display:"Gold Full Detail ($217 CAD)",price:"217",duration:"2.5-3.5 hours"},platinum_full:{display:"Platinum Full Detail ($244 CAD)",price:"244",duration:"3.5-4.5 hours"}},interior:{bronze_interior:{display:"Bronze Interior Detail ($137 CAD)",price:"137",duration:"1.5-2 hours"},gold_interior:{display:"Gold Interior Detail ($181 CAD)",price:"181",duration:"2-2.5 hours"},platinum_interior:{display:"Platinum Interior Detail ($208 CAD)",price:"208",duration:"2.5-3.5 hours"}},exterior:{gold_exterior:{display:"Gold Exterior Detail ($181 CAD)",price:"181",duration:"1-2 hours"},platinum_exterior:{display:"Premium Exterior Detail ($228 CAD)",price:"228",duration:"1.5-2.5 hours"}}},suv7:{full:{bronze_full:{display:"Bronze Full Detail ($204 CAD)",price:"204",duration:"2-3 hours"},gold_full:{display:"Gold Full Detail ($258 CAD)",price:"258",duration:"3-4 hours"},platinum_full:{display:"Platinum Full Detail ($285 CAD)",price:"285",duration:"4-5 hours"}},interior:{bronze_interior:{display:"Bronze Interior Detail ($154 CAD)",price:"154",duration:"2-2.5 hours"},gold_interior:{display:"Gold Interior Detail ($208 CAD)",price:"208",duration:"2.5-3 hours"},platinum_interior:{display:"Platinum Interior Detail ($235 CAD)",price:"235",duration:"3-4 hours"}},exterior:{gold_exterior:{display:"Gold Exterior Detail ($200 CAD)",price:"200",duration:"1.5-2 hours"},platinum_exterior:{display:"Premium Exterior Detail ($250 CAD)",price:"250",duration:"2-2.5 hours"}}},xlsuv:{full:{bronze_full:{display:"Bronze Full Detail ($213 CAD)",price:"213",duration:"2.5-3.5 hours"},gold_full:{display:"Gold Full Detail ($267 CAD)",price:"267",duration:"3.5-4.5 hours"},platinum_full:{display:"Platinum Full Detail ($294 CAD)",price:"294",duration:"4.5-6 hours"}},interior:{bronze_interior:{display:"Bronze Interior Detail ($163 CAD)",price:"163",duration:"2.5-3 hours"},gold_interior:{display:"Gold Interior Detail ($217 CAD)",price:"217",duration:"3-3.5 hours"},platinum_interior:{display:"Platinum Interior Detail ($244 CAD)",price:"244",duration:"3.5-4.5 hours"}},exterior:{gold_exterior:{display:"Gold Exterior Detail ($213 CAD)",price:"213",duration:"2-2.5 hours"},platinum_exterior:{display:"Premium Exterior Detail ($286 CAD)",price:"286",duration:"2.5-3 hours"}}}};return i[e]?.[t]?.[n]||i.sedan.full.gold_full}function updateSummary(e,t,n){const i=getPackageInfo(e,t,n);document.getElementById("summaryService").textContent=i.display.split(" (")[0],document.getElementById("summaryVehicle").textContent={sedan:"Sedan/Coupe (2 Seats)",suv5:"SUV (5 Seats)",suv7:"Pick Up/7-Seat SUV",xlsuv:"XL SUV"}[e]||"Sedan/Coupe (2 Seats)",document.getElementById("summaryDuration").textContent=i.duration,document.getElementById("summaryTotal").textContent=`$${i.price} CAD`}document.getElementById("review-summary")&&loadReviews(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".faq-toggle");e.length>0&&e.forEach((t=>{t.addEventListener("click",(function(){const n=this.nextElementSibling,i=this.querySelector("svg");n&&i&&(n.classList.toggle("hidden"),i.classList.toggle("rotate-180"),n.classList.contains("hidden")||e.forEach((e=>{if(e!==t){const t=e.nextElementSibling,n=e.querySelector("svg");t.classList.add("hidden"),n.classList.remove("rotate-180")}})))}))}));const t=document.querySelectorAll(".before-after-slider");t.length>0&&t.forEach((e=>{const t=e.querySelector('input[type="range"]'),n=e.querySelector(".after-image"),i=e.querySelector(".slider-handle"),l=e.querySelector(".slider-line");if(t&&n&&i&&l){function o(e){const o=e||t.value;n.style.clipPath=`inset(0 ${100-o}% 0 0)`,i.style.left=`${o}%`,l.style.left=`${o}%`}o(50),t.addEventListener("input",(()=>o()));let r=!1,a=0,s=0;e.addEventListener("touchstart",(e=>{r=!0,a=e.touches[0].clientX,s=a,e.preventDefault()}),{passive:!1}),e.addEventListener("touchend",(()=>{r=!1})),e.addEventListener("touchmove",(n=>{if(!r)return;n.preventDefault();const l=n.touches[0].clientX,a=l-s;s=l;const d=e.getBoundingClientRect(),c=parseFloat(i.style.left),u=Math.min(100,Math.max(0,c+a/d.width*100));t.value=u,o(u)})),e.addEventListener("mousedown",(e=>{r=!0,a=e.clientX,s=a,e.preventDefault()})),window.addEventListener("mouseup",(()=>{r=!1})),window.addEventListener("mousemove",(n=>{if(!r)return;const l=n.clientX,a=l-s;s=l;const d=e.getBoundingClientRect(),c=parseFloat(i.style.left),u=Math.min(100,Math.max(0,c+a/d.width*100));t.value=u,o(u)}))}}));const n=document.querySelectorAll(".package-btn");n.length>0&&(n.forEach((e=>{e.addEventListener("click",(function(){const e=this.dataset.package;n.forEach((e=>{e.classList.remove("bg-[#756AB6]","text-white","shadow-md"),e.classList.add("bg-white","text-[#756AB6]","shadow-sm")})),this.classList.add("bg-[#756AB6]","text-white","shadow-md"),this.classList.remove("bg-white","text-[#756AB6]","shadow-sm"),document.querySelectorAll(".process-content").forEach((t=>{t&&t.classList.toggle("hidden",t.dataset.process!==e)}))}))})),n[0].click())})),window.addEventListener("load",(function(){const e=document.getElementById("preloader");e&&(e.style.display="none"),document.getElementById("review-summary")&&loadGoogleMaps()})),document.addEventListener("DOMContentLoaded",(function(){const e=new URLSearchParams(window.location.search),t=e.get("vehicle")||"sedan",n=e.get("service")||"full",i=e.get("package")||"gold_full";document.getElementById("displayVehicleType").textContent={sedan:"Sedan/Coupe (2 Seats)",suv5:"SUV (5 Seats)",suv7:"Pick Up/7-Seat SUV",xlsuv:"XL SUV"}[t]||"Sedan/Coupe (2 Seats)",document.getElementById("id_vehicle_type").value=t;document.getElementById("displayServiceType").textContent={full:"Full Detail (Interior + Exterior)",interior:"Interior Detail",exterior:"Exterior Detail"}[n]||"Full Detail (Interior + Exterior)",document.getElementById("id_service_type").value=n;const l=getPackageInfo(t,n,i);document.getElementById("displayPackage").textContent=l.display,document.getElementById("id_package_type").value=i.split("_")[0],document.getElementById("packagePrice").value=l.price,updateSummary(t,n,i);const o=new Date,r=String(o.getDate()).padStart(2,"0"),a=String(o.getMonth()+1).padStart(2,"0"),s=o.getFullYear();document.getElementById("id_date").min=`${s}-${a}-${r}`})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".group.relative").forEach((e=>{e.addEventListener("click",(function(){const e=this.querySelector("img").src,t=this.querySelector("h3").textContent,n=this.querySelector("p").textContent,i=document.createElement("div");i.className="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",i.innerHTML=`\n          <div class="relative max-w-4xl w-full">\n            <img src="${e}" alt="${t}" class="w-full max-h-[80vh] object-contain">\n            <div class="bg-[#FBFBFB] p-4 rounded-b-lg">\n              <h3 class="text-xl font-bold text-[#756AB6]">${t}</h3>\n              <p class="text-gray-600">${n}</p>\n            </div>\n            <button class="absolute -top-12 right-0 text-white hover:text-[#AC87C5] transition-colors">\n              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />\n              </svg>\n            </button>\n          </div>\n        `,document.body.appendChild(i),i.querySelector("button").addEventListener("click",(function(){document.body.removeChild(i)})),i.addEventListener("click",(function(e){e.target===this&&document.body.removeChild(i)}))}))}))}));const reelContainer=document.getElementById("reelContainer");if(reelContainer){const e=Array.from(reelContainer.getElementsByClassName("reel")),t=document.getElementById("prevReel"),n=document.getElementById("nextReel");if(e.length>0&&t&&n){let i=1;function updateReels(){e.forEach(((e,t)=>{const n=t-i,l=e.querySelector("video");0===n?(e.style.transform="translateX(0) scale(1)",e.style.zIndex="20",l&&l.play()):-1===n||1===n?(e.style.transform="translateX(0) scale(0.75)",e.style.zIndex="10",l&&l.pause()):(e.style.transform="translateX(0) scale(0.5)",e.style.zIndex="0",l&&l.pause())}))}function moveReels(t){i=(i+t+e.length)%e.length,updateReels()}t.addEventListener("click",(()=>moveReels(-1))),n.addEventListener("click",(()=>moveReels(1))),e.forEach((t=>{t.addEventListener("click",(()=>{moveReels(e.indexOf(t)-i)}))})),updateReels()}}const mobileReels=document.getElementById("mobileReels");if(mobileReels){let l=0;const o=3;function updateMobileCarousel(){const e=100*-l;mobileReels.style.transform=`translateX(${e}%)`,document.querySelectorAll(".mobile-carousel video").forEach(((e,t)=>{e&&(t===l?e.play():e.pause())}))}const r=document.getElementById("mobileNext"),a=document.getElementById("mobilePrev");r&&r.addEventListener("click",(()=>{l<o-1&&(l++,updateMobileCarousel())})),a&&a.addEventListener("click",(()=>{l>0&&(l--,updateMobileCarousel())}))}document.querySelectorAll(".mute-btn").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.closest("div");if(t){const n=t.querySelector("video");n&&(n.muted=!n.muted,e.target.textContent=n.muted?"🔇":"🔊")}}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("confetti-container"),t=["#AC87C5","#756AB6","#E0E7FF","#F5F3FF"];for(let n=0;n<50;n++){const n=document.createElement("div");n.className="confetti",n.style.left=100*Math.random()+"vw",n.style.animationDelay=5*Math.random()+"s",n.style.width=8*Math.random()+5+"px",n.style.height=n.style.width,n.style.backgroundColor=t[Math.floor(Math.random()*t.length)],n.style.opacity=.5*Math.random()+.3,e.appendChild(n)}}));